# ===========================================
# PRODUCTION ENVIRONMENT CONFIGURATION
# ===========================================
# SECURITY CRITICAL: Never commit the actual .env.production file to Git
# Copy this file to .env.production and fill in secure values

# ===========================================
# DATABASE CONFIGURATION
# ===========================================
# PostgreSQL credentials (CHANGE THESE!)
POSTGRES_USER=wecanacademy
POSTGRES_PASSWORD=CHANGE_THIS_TO_SECURE_RANDOM_PASSWORD
POSTGRES_DB=wecanacademy

# Database URLs
# Use PgBouncer for app connections (connection pooling)
DATABASE_URL="postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@pgbouncer:5432/${POSTGRES_DB}?schema=public&pgbouncer=true"

# Direct PostgreSQL connection (migrations only)
DIRECT_DATABASE_URL="postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}?schema=public"

# ===========================================
# REDIS CONFIGURATION
# ===========================================
# Redis password (CHANGE THIS!)
REDIS_PASSWORD=CHANGE_THIS_TO_SECURE_RANDOM_PASSWORD

# Redis URL (used by app)
REDIS_URL="redis://:${REDIS_PASSWORD}@redis:6379"

# ===========================================
# AUTHENTICATION CONFIGURATION
# ===========================================
# NextAuth secret - generate with: openssl rand -base64 32
NEXTAUTH_SECRET=CHANGE_THIS_TO_SECURE_RANDOM_STRING_USE_OPENSSL_RAND

# NextAuth URL - your production domain
NEXTAUTH_URL=https://wecan.iyfkenya.org

# Trust proxy headers (required for production behind reverse proxy)
AUTH_TRUST_HOST=true

# ===========================================
# APPLICATION CONFIGURATION
# ===========================================
NODE_ENV=production

# UV thread pool size (optimize for concurrent requests)
UV_THREADPOOL_SIZE=16

# ===========================================
# SECURITY NOTES
# ===========================================
# 1. Generate strong passwords:
#    - PostgreSQL: openssl rand -base64 32
#    - Redis: openssl rand -base64 32
#    - NextAuth Secret: openssl rand -base64 32
#
# 2. Never expose database ports to host in production
#
# 3. Use Docker secrets for sensitive values in production:
#    docker secret create postgres_password /path/to/password/file
#
# 4. Backup your .env.production file securely (encrypted storage)
#
# 5. Rotate passwords regularly (every 90 days recommended)
